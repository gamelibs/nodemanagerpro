// ä¸­æ–‡ç¿»è¯‘
const zh = {
  // é€šç”¨
  cancel: 'å–æ¶ˆ',
  confirm: 'ç¡®è®¤',
  save: 'ä¿å­˜',
  reset: 'é‡ç½®',
  loading: 'åŠ è½½ä¸­...',
  error: 'é”™è¯¯',
  success: 'æˆåŠŸ',
  warning: 'è­¦å‘Š',
  info: 'ä¿¡æ¯',

  // åº”ç”¨æ ‡é¢˜
  appTitle: 'ä¸“ä¸š Node.js ç®¡ç†å™¨',
  appDescription: 'ä¸“ä¸šçš„ Node.js é¡¹ç›®ç®¡ç†å¹³å°',

  // å¯¼èˆª
  nav: {
    settings: 'è®¾ç½®',
    projects: 'é¡¹ç›®',
  },

  // è®¾ç½®é¡µé¢
  settings: {
    title: 'è®¾ç½®',
    description: 'ç®¡ç†åº”ç”¨ç¨‹åºé¦–é€‰é¡¹å’Œé…ç½®',
    reset: 'é‡ç½®æ‰€æœ‰è®¾ç½®',
    app: {
      title: 'åº”ç”¨è®¾ç½®',
      theme: 'ä¸»é¢˜',
      themeDesc: 'é€‰æ‹©åº”ç”¨ç¨‹åºçš„å¤–è§‚ä¸»é¢˜',
      language: 'è¯­è¨€',
      languageDesc: 'è®¾ç½®åº”ç”¨ç¨‹åºç•Œé¢è¯­è¨€',
      autoStart: 'å¼€æœºè‡ªå¯åŠ¨',
      autoStartDesc: 'ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œåº”ç”¨ç¨‹åº',
      devTools: 'å¼€å‘è€…å·¥å…·',
      devToolsDesc: 'åˆ‡æ¢å¼€å‘è€…å·¥å…·çš„å¼€å¯çŠ¶æ€ï¼ˆç‹¬ç«‹çª—å£ï¼‰',
    },
    notifications: {
      title: 'é€šçŸ¥è®¾ç½®',
      projectStatus: 'é¡¹ç›®çŠ¶æ€é€šçŸ¥',
      projectStatusDesc: 'å½“é¡¹ç›®å¯åŠ¨æˆ–åœæ­¢æ—¶æ˜¾ç¤ºé€šçŸ¥',
      errors: 'é”™è¯¯é€šçŸ¥',
      errorsDesc: 'å‘ç”Ÿé”™è¯¯æ—¶æ˜¾ç¤ºé€šçŸ¥',
    },
    about: {
      title: 'å…³äº',
      description: 'ç°ä»£åŒ–çš„Node.jsé¡¹ç›®ç®¡ç†å·¥å…·',
      features1: 'ä¸€é”®å¯åŠ¨å’Œåœæ­¢Node.jsé¡¹ç›®',
      features2: 'å®æ—¶æ—¥å¿—ç›‘æ§å’Œé¡¹ç›®çŠ¶æ€ç®¡ç†',
      techStack: 'æŠ€æœ¯æ ˆ',
    },
    debugTools: {
      title: 'å¼€å‘è€…è°ƒè¯•å·¥å…·',
      description: 'ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯ç”¨çš„è°ƒè¯•åŠŸèƒ½',
      hotReload: 'çƒ­é‡è½½æµ‹è¯•',
      hotReloadDesc: 'æµ‹è¯•çƒ­é‡è½½åŠŸèƒ½å’Œè®¡æ•°å™¨çŠ¶æ€ä¿æŒ',
      ipcTest: 'IPC é€šä¿¡æµ‹è¯•',
      ipcTestDesc: 'æµ‹è¯•ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é—´çš„é€šä¿¡',
      storageInfo: 'å­˜å‚¨çŠ¶æ€è°ƒè¯•',
      storageInfoDesc: 'æŸ¥çœ‹é¡¹ç›®æ•°æ®å­˜å‚¨çŠ¶æ€å’Œç›®å½•ä¿¡æ¯',
    },
  },

  // æ—¥å¿—
  logs: {
    noActiveProjects: 'æš‚æ— æ´»åŠ¨é¡¹ç›®',
    noActiveProjectsDesc: 'å¯åŠ¨é¡¹ç›®åå¯åœ¨æ­¤æŸ¥çœ‹æ—¥å¿—',
    startHint: 'ç‚¹å‡»é¡¹ç›®çš„"å¯åŠ¨"æŒ‰é’®å¼€å§‹',
  },

  // é¡¹ç›®ç®¡ç†  
  projects: {
    title: 'é¡¹ç›®',
    import: 'å¯¼å…¥é¡¹ç›®',
    importing: 'å¯¼å…¥ä¸­',
    create: 'åˆ›å»ºé¡¹ç›®',
    creating: 'åˆ›å»ºä¸­',
    createNew: 'å¿«é€Ÿåˆ›å»ºé¡¹ç›®',
    name: 'é¡¹ç›®åç§°',
    path: 'é¡¹ç›®è·¯å¾„',
    type: 'é¡¹ç›®ç±»å‹',
    port: 'ç«¯å£',
    status: 'é¡¹ç›®çŠ¶æ€',
    running: 'è¿è¡Œä¸­',
    stopped: 'å·²åœæ­¢',
    starting: 'å¯åŠ¨ä¸­',
    stopping: 'åœæ­¢ä¸­',
    empty: 'æš‚æ— é¡¹ç›®',
    emptyDesc: 'è¿˜æ²¡æœ‰ä»»ä½•é¡¹ç›®ï¼Œå¼€å§‹åˆ›å»ºç¬¬ä¸€ä¸ªå§ï¼',
    loading: 'åŠ è½½ä¸­...',
    
    // åˆ›å»ºé¡¹ç›®ç›¸å…³
    createModal: {
      title: 'åˆ›å»ºæ–°é¡¹ç›®',
      basicInfo: 'åŸºæœ¬ä¿¡æ¯',
      projectName: 'é¡¹ç›®åç§°',
      projectNamePlaceholder: 'my-awesome-project',
      projectPath: 'é¡¹ç›®è·¯å¾„',
      projectPathPlaceholder: '/Users/yourname/projects',
      selectButton: 'é€‰æ‹©',
      portNumber: 'ç«¯å£å·',
      portPlaceholder: '8000',
      portDesc: 'é»˜è®¤ä» 8000 å¼€å§‹',
      
      projectTemplate: 'é¡¹ç›®æ¨¡æ¿',
      templates: {
        pureApi: {
          name: 'ğŸ”Œ Pure API Server',
          description: 'çº¯åç«¯ API æœåŠ¡ï¼Œä¸“æ³¨äºæä¾› RESTful API',
          features: ['Express.js æœåŠ¡å™¨', 'RESTful API', 'JSON å“åº”', 'CORS æ”¯æŒ', 'ä¸­é—´ä»¶é…ç½®', 'ä¸“æ³¨åç«¯'],
        },
        staticApp: {
          name: 'ğŸŒ Static Website + API',
          description: 'ä¼ ç»Ÿç½‘ç«™æ¨¡å¼ï¼Œé™æ€æ–‡ä»¶æœåŠ¡ + Express API',
          features: ['Express.js åç«¯', 'é™æ€æ–‡ä»¶æœåŠ¡', 'HTML/CSS/JS', 'public ç›®å½•', 'ä¼ ç»Ÿç½‘ç«™', 'ç®€å•éƒ¨ç½²'],
        },
        fullStack: {
          name: 'âš¡ Full-Stack Application',
          description: 'ç°ä»£å…¨æ ˆåº”ç”¨ï¼ŒåŒ…å«æ„å»ºå·¥å…·å’Œå‰ç«¯æ¡†æ¶',
          features: ['TypeScript æ”¯æŒ', 'Vite æ„å»ºå·¥å…·', 'Express åç«¯', 'çƒ­é‡è½½', 'API ä»£ç†', 'ç°ä»£å‰ç«¯æ¡†æ¶'],
        }
      },
      
      frontendFramework: 'å‰ç«¯æ¡†æ¶',
      frameworks: {
        vanillaTs: {
          name: 'Vanilla TypeScript',
          description: 'çº¯ TypeScriptï¼Œæ— æ¡†æ¶ä¾èµ–'
        },
        react: {
          name: 'React',
          description: 'React 18 + TypeScript'
        },
        vue: {
          name: 'Vue',
          description: 'Vue 3 + TypeScript'
        }
      },
      
      packageManager: 'åŒ…ç®¡ç†å™¨',
      packageManagers: {
        npm: {
          name: 'npm',
          description: 'Node.js é»˜è®¤åŒ…ç®¡ç†å™¨ï¼Œç¨³å®šå¯é ï¼Œå¹¿æ³›ä½¿ç”¨'
        },
        yarn: {
          name: 'Yarn',
          description: 'å¿«é€Ÿã€å¯é ã€å®‰å…¨çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œæ”¯æŒå·¥ä½œåŒº'
        },
        pnpm: {
          name: 'pnpm',
          description: 'é«˜æ•ˆçš„ç£ç›˜ç©ºé—´åˆ©ç”¨ï¼Œæ›´å¿«çš„å®‰è£…é€Ÿåº¦'
        }
      },
      
      optionalTools: 'å¯é€‰å·¥å…·',
      tools: {
        eslint: {
          name: 'ESLint',
          description: 'ä»£ç è´¨é‡æ£€æŸ¥'
        },
        prettier: {
          name: 'Prettier',
          description: 'ä»£ç æ ¼å¼åŒ–'
        },
        jest: {
          name: 'Jest',
          description: 'å•å…ƒæµ‹è¯•æ¡†æ¶'
        },
        envConfig: {
          name: '.env é…ç½®',
          description: 'ç¯å¢ƒå˜é‡æ–‡ä»¶'
        },
        autoInstall: {
          name: 'è‡ªåŠ¨å®‰è£…ä¾èµ–',
          description: 'åˆ›å»ºåè‡ªåŠ¨è¿è¡Œå®‰è£…å‘½ä»¤'
        },
        git: {
          name: 'Git åˆå§‹åŒ–',
          description: 'åˆå§‹åŒ– Git ä»“åº“'
        }
      },
      
      cancel: 'å–æ¶ˆ',
      create: 'åˆ›å»ºé¡¹ç›®',
      
      // éªŒè¯æ¶ˆæ¯
      validation: {
        nameRequired: 'é¡¹ç›®åç§°ä¸èƒ½ä¸ºç©º',
        pathRequired: 'é¡¹ç›®è·¯å¾„ä¸èƒ½ä¸ºç©º',
        portRange: 'ç«¯å£å·å¿…é¡»åœ¨ 1000-65535 ä¹‹é—´'
      }
    },
  },

  // é¡¹ç›®æ“ä½œ
  actions: {
    start: 'å¯åŠ¨',
    stop: 'åœæ­¢',
    restart: 'é‡å¯',
    remove: 'åˆ é™¤',
    openLogs: 'æŸ¥çœ‹æ—¥å¿—',
    openInBrowser: 'åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€',
  },

  // ä¸»é¢˜é€‰é¡¹
  themes: {
    dark: 'æ·±è‰²ä¸»é¢˜',
    light: 'æµ…è‰²ä¸»é¢˜',
  },

  // è¯­è¨€é€‰é¡¹
  languages: {
    zh: 'ä¸­æ–‡',
    en: 'English',
  },

  // é€šçŸ¥æ¶ˆæ¯
  messages: {
    settingsSaved: 'è®¾ç½®å·²ä¿å­˜',
    settingsReset: 'è®¾ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼',
    projectImported: 'é¡¹ç›®å¯¼å…¥æˆåŠŸ',
    projectCreated: 'é¡¹ç›®åˆ›å»ºæˆåŠŸ',
    projectStarted: 'é¡¹ç›®å¯åŠ¨æˆåŠŸ',
    projectStopped: 'é¡¹ç›®åœæ­¢æˆåŠŸ',
    projectRemoved: 'é¡¹ç›®å·²åˆ é™¤',
    importFailed: 'å¯¼å…¥å¤±è´¥',
    createFailed: 'åˆ›å»ºå¤±è´¥',
    startFailed: 'å¯åŠ¨å¤±è´¥',
    stopFailed: 'åœæ­¢å¤±è´¥',
    settingsLoadFailed: 'è®¾ç½®åŠ è½½å¤±è´¥',
    settingsSaveFailed: 'è®¾ç½®ä¿å­˜å¤±è´¥',
  },

  // é¡¹ç›®åˆ›å»º
  create: {
    project: 'åˆ›å»ºé¡¹ç›®',
    template: 'é¡¹ç›®æ¨¡æ¿',
    packageManager: 'åŒ…ç®¡ç†å™¨',
    frontendFramework: 'å‰ç«¯æ¡†æ¶',
    tools: 'å¯é€‰å·¥å…·',
    eslint: 'ESLint - ä»£ç è´¨é‡æ£€æŸ¥',
    prettier: 'Prettier - ä»£ç æ ¼å¼åŒ–',
    jest: 'Jest - å•å…ƒæµ‹è¯•æ¡†æ¶',
    envConfig: '.env é…ç½® - ç¯å¢ƒå˜é‡é…ç½®',
    autoInstall: 'è‡ªåŠ¨å®‰è£…ä¾èµ– - åˆ›å»ºåè‡ªåŠ¨å®‰è£…',
    gitInit: 'Git åˆå§‹åŒ– - åˆå§‹åŒ– Git ä»“åº“',
  },
};

// è‹±æ–‡ç¿»è¯‘
const en = {
  // Common
  cancel: 'Cancel',
  confirm: 'Confirm',
  save: 'Save',
  reset: 'Reset',
  loading: 'Loading...',
  error: 'Error',
  success: 'Success',
  warning: 'Warning',
  info: 'Info',

  // App Title
  appTitle: 'NodeHub Pro',
  appDescription: 'Professional Node.js Project Management Platform',

  // Navigation
  nav: {
    settings: 'Settings',
    projects: 'Projects',
  },

  // Settings Page
  settings: {
    title: 'Settings',
    description: 'Manage application preferences and configuration',
    reset: 'Reset All Settings',
    app: {
      title: 'App Settings',
      theme: 'Theme',
      themeDesc: 'Choose the appearance theme for the application',
      language: 'Language',
      languageDesc: 'Set the interface language of the application',
      autoStart: 'Auto Start on Boot',
      autoStartDesc: 'Automatically run the application when system starts',
      devTools: 'Developer Tools',
      devToolsDesc: 'Toggle developer tools (opens in detached window)',
    },
    notifications: {
      title: 'Notifications',
      projectStatus: 'Project Status Notifications',
      projectStatusDesc: 'Show notifications when projects start or stop',
      errors: 'Error Notifications',
      errorsDesc: 'Show notifications when errors occur',
    },
    about: {
      title: 'About',
      description: 'Modern Node.js project management tool',
      features1: 'One-click start and stop Node.js projects',
      features2: 'Real-time log monitoring and project status management',
      techStack: 'Tech Stack',
    },
    debugTools: {
      title: 'Developer Debug Tools',
      description: 'Debugging features available only in development mode',
      hotReload: 'Hot Reload Test',
      hotReloadDesc: 'Test hot reload functionality and counter state persistence',
      ipcTest: 'IPC Communication Test',
      ipcTestDesc: 'Test communication between main and renderer processes',
      storageInfo: 'Storage State Debug',
      storageInfoDesc: 'View project data storage state and directory information',
    },
  },

  // Logs
  logs: {
    noActiveProjects: 'No Active Projects',
    noActiveProjectsDesc: 'Start a project to view logs here',
    startHint: 'Click the "Start" button on a project to begin',
  },

  // Project Management
  projects: {
    title: 'Projects',
    import: 'Import Project',
    importing: 'Importing',
    create: 'Create Project',
    creating: 'Creating',
    createNew: 'Quick Create Project',
    name: 'Project Name',
    path: 'Project Path',
    type: 'Project Type',
    port: 'Port',
    status: 'Status',
    running: 'Running',
    stopped: 'Stopped',
    starting: 'Starting',
    stopping: 'Stopping',
    empty: 'No Projects',
    emptyDesc: 'No projects yet, start by creating your first one!',
    loading: 'Loading...',
    
    // Create project modal
    createModal: {
      title: 'Create New Project',
      basicInfo: 'Basic Information',
      projectName: 'Project Name',
      projectNamePlaceholder: 'my-awesome-project',
      projectPath: 'Project Path',
      projectPathPlaceholder: '/Users/yourname/projects',
      selectButton: 'Select',
      portNumber: 'Port Number',
      portPlaceholder: '8000',
      portDesc: 'Default starts from 8000',
      
      projectTemplate: 'Project Template',
      templates: {
        pureApi: {
          name: 'ğŸ”Œ Pure API Server',
          description: 'Pure backend API service, focused on providing RESTful APIs',
          features: ['Express.js Server', 'RESTful API', 'JSON Response', 'CORS Support', 'Middleware Config', 'Backend Focus'],
        },
        staticApp: {
          name: 'ğŸŒ Static Website + API',
          description: 'Traditional website mode, static file serving + Express API',
          features: ['Express.js Backend', 'Static File Serving', 'HTML/CSS/JS', 'Public Directory', 'Traditional Website', 'Simple Deployment'],
        },
        fullStack: {
          name: 'âš¡ Full-Stack Application',
          description: 'Modern full-stack application with build tools and frontend framework',
          features: ['TypeScript Support', 'Vite Build Tool', 'Express Backend', 'Hot Reload', 'API Proxy', 'Modern Frontend Framework'],
        }
      },
      
      frontendFramework: 'Frontend Framework',
      frameworks: {
        vanillaTs: {
          name: 'Vanilla TypeScript',
          description: 'Pure TypeScript, no framework dependencies'
        },
        react: {
          name: 'React',
          description: 'React 18 + TypeScript'
        },
        vue: {
          name: 'Vue',
          description: 'Vue 3 + TypeScript'
        }
      },
      
      packageManager: 'Package Manager',
      packageManagers: {
        npm: {
          name: 'npm',
          description: 'Node.js default package manager, stable and reliable, widely used'
        },
        yarn: {
          name: 'Yarn',
          description: 'Fast, reliable, secure dependency management tool with workspace support'
        },
        pnpm: {
          name: 'pnpm',
          description: 'Efficient disk space usage and faster installation speed'
        }
      },
      
      optionalTools: 'Optional Tools',
      tools: {
        eslint: {
          name: 'ESLint',
          description: 'Code quality checking'
        },
        prettier: {
          name: 'Prettier',
          description: 'Code formatting'
        },
        jest: {
          name: 'Jest',
          description: 'Unit testing framework'
        },
        envConfig: {
          name: '.env Configuration',
          description: 'Environment variables file'
        },
        autoInstall: {
          name: 'Auto Install Dependencies',
          description: 'Automatically run install command after creation'
        },
        git: {
          name: 'Git Initialization',
          description: 'Initialize Git repository'
        }
      },
      
      cancel: 'Cancel',
      create: 'Create Project',
      
      // Validation messages
      validation: {
        nameRequired: 'Project name cannot be empty',
        pathRequired: 'Project path cannot be empty',
        portRange: 'Port number must be between 1000-65535'
      }
    },
  },

  // Project Actions
  actions: {
    start: 'Start',
    stop: 'Stop',
    restart: 'Restart',
    remove: 'Remove',
    openLogs: 'View Logs',
    openInBrowser: 'Open in Browser',
  },

  // Theme Options
  themes: {
    dark: 'Dark Theme',
    light: 'Light Theme',
  },

  // Language Options
  languages: {
    zh: 'ä¸­æ–‡',
    en: 'English',
  },

  // Notification Messages
  messages: {
    settingsSaved: 'Settings saved',
    settingsReset: 'Settings reset to defaults',
    projectImported: 'Project imported successfully',
    projectCreated: 'Project created successfully',
    projectStarted: 'Project started successfully',
    projectStopped: 'Project stopped successfully',
    projectRemoved: 'Project removed',
    importFailed: 'Import failed',
    createFailed: 'Create failed',
    startFailed: 'Start failed',
    stopFailed: 'Stop failed',
    settingsLoadFailed: 'Failed to load settings',
    settingsSaveFailed: 'Failed to save settings',
  },

  // Project Creation
  create: {
    project: 'Create Project',
    template: 'Project Template',
    packageManager: 'Package Manager',
    frontendFramework: 'Frontend Framework',
    tools: 'Optional Tools',
    eslint: 'ESLint - Code quality checking',
    prettier: 'Prettier - Code formatting',
    jest: 'Jest - Unit testing framework',
    envConfig: '.env Config - Environment variables configuration',
    autoInstall: 'Auto Install Dependencies - Install after creation',
    gitInit: 'Git Init - Initialize Git repository',
  },
};

// ç¿»è¯‘æ˜ å°„
const translations = { zh, en };

// å½“å‰è¯­è¨€çŠ¶æ€
let currentLanguage: 'zh' | 'en' = 'zh';

// è·å–ç¿»è¯‘æ–‡æœ¬çš„å‡½æ•°
export function t(key: string): string {
  const keys = key.split('.');
  let value: any = translations[currentLanguage];
  
  for (const k of keys) {
    if (value && typeof value === 'object' && k in value) {
      value = value[k];
    } else {
      // å¦‚æœæ‰¾ä¸åˆ°ç¿»è¯‘ï¼Œè¿”å›åŸå§‹ key
      console.warn(`Translation key not found: ${key}`);
      return key;
    }
  }
  
  return typeof value === 'string' ? value : key;
}

// è®¾ç½®è¯­è¨€
export function setLanguage(lang: 'zh' | 'en') {
  currentLanguage = lang;
}

// è·å–å½“å‰è¯­è¨€
export function getCurrentLanguage() {
  return currentLanguage;
}

// è·å–æ‰€æœ‰å¯ç”¨è¯­è¨€
export function getAvailableLanguages() {
  return Object.keys(translations);
}

// åˆ›å»ºå›½é™…åŒ–å®ä¾‹
export function createI18n() {
  return {
    t,
    setLanguage,
    getCurrentLanguage,
    getAvailableLanguages,
  };
}

// å›½é™…åŒ–æœåŠ¡ç±»ï¼ˆä¸ºäº†ä¿æŒä¸ç°æœ‰ä»£ç çš„å…¼å®¹æ€§ï¼‰
export class I18nService {
  static setLanguage(lang: 'zh' | 'en') {
    setLanguage(lang);
  }

  static getCurrentLanguage() {
    return getCurrentLanguage();
  }

  static t(key: string) {
    return t(key);
  }

  static getAvailableLanguages() {
    return [
      { code: 'zh', name: 'ä¸­æ–‡' },
      { code: 'en', name: 'English' },
    ];
  }
}
