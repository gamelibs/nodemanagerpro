# 项目结构逻辑流程图

## 📋 概述
本文档展示 NodeAppManager 项目的结构和逻辑流程，包括各层次组件之间的交互关系和数据流向。

---

## 🏗️ 整体架构流程

```
┌─────────────────────────────────────────────────────────────────┐
│                         用户界面层 (UI Layer)                    │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │   ProjectsPage  │  │  ProjectDetails │  │ DependencyStatus│   │
│  │     (主页面)     │  │    (项目详情)    │  │   (依赖状态)     │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │                 │  │ ProjectActions  │  │   ProjectList   │   │
│  │                 │  │   (项目操作)     │  │   (项目列表)     │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Hook 状态管理层 (Hook Layer)                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │   useProjects   │  │  useProjectData │  │useProjectOps... │   │
│  │   (项目管理)     │  │   (数据获取)     │  │   (项目操作)     │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                       业务逻辑层 (Service Layer)                  │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │   PM2Service    │  │ProjectValidation│  │ ProjectConfig   │   │
│  │  (PM2进程管理)   │  │   Service       │  │   Service       │   │
│  │                 │  │  (项目验证)      │  │  (配置检测)      │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐                       │
│  │ ProjectService  │  │ FileSystemSvc   │                       │
│  │  (项目服务)      │  │  (文件系统)      │                       │
│  └─────────────────┘  └─────────────────┘                       │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                     数据持久化层 (Data Layer)                     │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │ projects.json   │  │  package.json   │  │   PM2 进程      │   │
│  │  (项目数据)      │  │  (项目配置)      │  │   (运行状态)     │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔄 状态检查流程

```
┌─────────────────────────────────────────────────────────────────┐
│                          项目状态检查流程                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐         ┌─────────────────┐                │
│  │   应用启动      │   ──→   │  加载项目列表    │                │
│  │                 │         │                 │                │
│  └─────────────────┘         └─────────────────┘                │
│           │                           │                         │
│           ▼                           ▼                         │
│  ┌─────────────────┐         ┌─────────────────┐                │
│  │ 自动同步PM2状态  │   ◄──   │ 触发状态同步     │                │
│  │                 │         │                 │                │
│  └─────────────────┘         └─────────────────┘                │
│           │                                                     │
│           ▼                                                     │
│  ┌─────────────────┐                                            │
│  │ 批量状态更新     │                                            │
│  │                 │                                            │
│  └─────────────────┘                                            │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📊 数据流向图

```
┌─────────────────────────────────────────────────────────────────┐
│                          数据流向示意图                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  用户操作                                                        │
│     │                                                           │
│     ▼                                                           │
│  ┌─────────────────┐                                            │
│  │ UI Components   │                                            │
│  │   (用户界面)     │                                            │
│  └─────────────────┘                                            │
│           │                                                     │
│           ▼                                                     │
│  ┌─────────────────┐    ┌─────────────────┐                    │
│  │    Hooks        │◄──►│  App Context    │                    │
│  │  (状态管理)      │    │   (全局状态)     │                    │
│  └─────────────────┘    └─────────────────┘                    │
│           │                                                     │
│           ▼                                                     │
│  ┌─────────────────┐                                            │
│  │    Services     │                                            │
│  │   (业务逻辑)     │                                            │
│  └─────────────────┘                                            │
│           │                                                     │
│           ▼                                                     │
│  ┌─────────────────┐    ┌─────────────────┐                    │
│  │   Electron      │◄──►│      PM2        │                    │
│  │     API         │    │   (进程管理)     │                    │
│  └─────────────────┘    └─────────────────┘                    │
│           │                       │                            │
│           ▼                       ▼                            │
│  ┌─────────────────┐    ┌─────────────────┐                    │
│  │  File System    │    │  Process Status │                    │
│  │   (文件系统)     │    │   (进程状态)     │                    │
│  └─────────────────┘    └─────────────────┘                    │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🎯 核心功能模块

```
┌─────────────────────────────────────────────────────────────────┐
│                         核心功能模块划分                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │   项目管理      │  │   状态监控      │  │   配置检测      │   │
│  │                 │  │                 │  │                 │   │
│  │  • 导入项目     │  │  • PM2状态     │  │  • package.json │   │
│  │  • 删除项目     │  │  • 运行状态     │  │  • 依赖检查     │   │
│  │  • 项目列表     │  │  • 性能监控     │  │  • 脚本检测     │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐   │
│  │   进程控制      │  │   日志管理      │  │   文件操作      │   │
│  │                 │  │                 │  │                 │   │
│  │  • 启动项目     │  │  • 实时日志     │  │  • 配置读写     │   │
│  │  • 停止项目     │  │  • 历史日志     │  │  • 状态持久化   │   │
│  │  • 重启项目     │  │  • 错误日志     │  │  • 数据备份     │   │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

*最后更新时间: 2025年6月2日*
